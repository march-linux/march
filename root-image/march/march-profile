SOURCE=net
SYNC_URL=http://mirrors.kernel.org/archlinux/\$repo/os/\$arch

TARGET_PACKAGES="$(grep -v ^# /march/packages.list)"

worker_intro () {
	inform "March will perform a clean installation. To stop, press Ctrl+C within 10 seconds."
	sleep 10
}

worker_configure_system () {
	# copy march config
	cp /etc/sudoers $var_TARGET_DIR/etc/
	cp /etc/pacman.d/mirrorlist $var_TARGET_DIR/etc/pacman.d/
	cp /etc/locale.gen $var_TARGET_DIR/etc/
	# setup rc.conf
	sed -i -e 's|^DAEMONS=.*|DAEMONS=(dbus networkmanager gdm)|' $var_TARGET_DIR/etc/rc.conf
	# adduser and setup locale
	chroot $var_TARGET_DIR locale-gen
	chroot $var_TARGET_DIR usermod -p U6aMy0wojraho root
	chroot $var_TARGET_DIR useradd -m -p U6aMy0wojraho -g users -G audio,lp,network,optical,power,storage,video,wheel march
}

GRUB_DEVICE=/dev/sda
PARTITIONS='/dev/sda 100:ext2:+ 512:swap *:ext4'
BLOCKDATA='/dev/sda1 raw no_label ext2;yes;/boot;target;no_opts;no_label;no_params
/dev/sda2 raw no_label swap;yes;no_mountpoint;target;no_opts;no_label;no_params
/dev/sda3 raw no_label ext4;yes;/;target;no_opts;no_label;no_params'
